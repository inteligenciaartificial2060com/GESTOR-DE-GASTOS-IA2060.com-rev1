<!DOCTYPE html> <html> <head> <title>Registro de Movimientos</title> <style> body { font-family: Arial, sans-serif; margin: 20px; } h1 { color: #333; } form { background-color: #f4f4f4; padding: 20px; border-radius: 5px; } label { display: block; margin-bottom: 5px; } input[type="text"], input[type="number"], input[type="date"], select { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; } button { background-color: #4CAF50; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; } button:hover { background-color: #45a049; } table { width: 100%; border-collapse: collapse; margin-top: 20px; } th, td { border: 1px solid #ddd; padding: 8px; text-align: left; } th { background-color: #f2f2f2; } #logo-container { position: absolute; top: 10px; left: 10px; } #logo-container img { width: 100px; /* Ajusta el tamaño según sea necesario */ height: auto; } </style> </head> <body> <div id="logo-container"> </div> <h1>Registro de Movimientos Financieros</h1> <form id="registroForm"> <label for="tipo">Tipo de Movimiento:</label> <select id="tipo" name="tipo"> <option value="ingreso">Ingreso</option> <option value="gasto">Gasto</option> </select> <label for="descripcion">Descripción:</label> <input type="text" id="descripcion" name="descripcion" required> <label for="monto">Monto:</label> <input type="number" id="monto" name="monto" min="0" step="0.01" required> <label for="fecha">Fecha:</label> <input type="date" id="fecha" name="fecha" required> <button type="submit">Agregar Movimiento</button> </form> <button id="vozBtn">Ingresar por Voz</button> <h2>Listado de Movimientos</h2> <table id="movimientosTable"> <thead> <tr> <th>Tipo</th> <th>Descripción</th> <th>Monto</th> <th>Fecha</th> <th>Acciones</th> </tr> </thead> <tbody> </tbody> </table> <script> document.addEventListener('DOMContentLoaded', function() { const registroForm = document.getElementById('registroForm'); const movimientosTable = document.getElementById('movimientosTable').getElementsByTagName('tbody')[0]; const vozBtn = document.getElementById('vozBtn'); const logoContainer = document.getElementById('logo-container'); // Opción para cargar el logo como archivo const logoInput = document.createElement('input'); logoInput.type = 'file'; logoInput.accept = 'image/*'; logoInput.onchange = function(event) { const file = event.target.files[0]; if (file) { const reader = new FileReader(); reader.onload = function(e) { const logoImg = document.createElement('img'); logoImg.src = e.target.result; logoImg.alt = 'Logo'; logoContainer.innerHTML = ''; // Limpiar cualquier logo anterior logoContainer.appendChild(logoImg); }; reader.readAsDataURL(file); } }; // Añadir un botón para seleccionar el logo vozBtn.parentNode.insertBefore(logoInput, vozBtn.nextSibling); const seleccionarLogoBtn = document.createElement('button'); seleccionarLogoBtn.textContent = 'Seleccionar Logo'; seleccionarLogoBtn.type = 'button'; seleccionarLogoBtn.onclick = function() { logoInput.click(); }; vozBtn.parentNode.insertBefore(seleccionarLogoBtn, logoInput); // Cargar movimientos guardados al iniciar const movimientosGuardados = JSON.parse(localStorage.getItem('movimientos')) || []; movimientosGuardados.forEach(movimiento => agregarFilaTabla(movimiento)); registroForm.addEventListener('submit', function(event) { event.preventDefault(); const tipo = document.getElementById('tipo').value; const descripcion = document.getElementById('descripcion').value; const monto = parseFloat(document.getElementById('monto').value); const fecha = document.getElementById('fecha').value; const nuevoMovimiento = { tipo, descripcion, monto, fecha }; agregarFilaTabla(nuevoMovimiento); guardarMovimiento(nuevoMovimiento); registroForm.reset(); }); vozBtn.addEventListener('click', function() { if (!('webkitSpeechRecognition' in window)) { alert("Tu navegador no soporta el reconocimiento de voz. Por favor, usa Chrome."); return; } const recognition = new webkitSpeechRecognition(); recognition.lang = 'es-ES'; recognition.continuous = false; recognition.interimResults = false; recognition.onstart = function() { console.log('Escuchando...'); vozBtn.textContent = 'Hablando...'; }; recognition.onresult = function(event) { const transcript = event.results[0][0].transcript; console.log('Transcripción: ', transcript); procesarComandoVoz(transcript); }; recognition.onerror = function(event) { console.error('Error de reconocimiento de voz', event.error); alert('No se pudo reconocer la voz. Inténtalo de nuevo.'); vozBtn.textContent = 'Ingresar por Voz'; }; recognition.onend = function() { vozBtn.textContent = 'Ingresar por Voz'; }; recognition.start(); }); function procesarComandoVoz(comando) { // Implementación básica para procesar comandos de voz const tipoMatch = comando.match(/(ingreso|gasto)/i); const montoMatch = comando.match(/(\d+(\.\d+)?)\s*(euros|dólares)?/i); const fechaMatch = comando.match(/el\s*(\d{1,2})\s*de\s*([a-z]+)\s*de\s*(\d{4})/i); const descripcion = comando.replace(/(ingreso|gasto|el\s*\d{1,2}\s*de\s*[a-z]+\s*de\s*\d{4}|\d+(\.\d+)?\s*(euros|dólares)?)/gi, '').trim(); let tipo = tipoMatch ? tipoMatch[0].toLowerCase() : ''; let monto = montoMatch ? parseFloat(montoMatch[1]) : NaN; let fecha = ''; if (fechaMatch) { const dia = fechaMatch[1]; const mesStr = fechaMatch[2].toLowerCase(); const año = fechaMatch[3]; const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre']; const mesNum = meses.indexOf(mesStr) + 1; fecha = `${año}-${mesNum < 10 ? '0' + mesNum : mesNum}-${dia < 10 ? '0' + dia : dia}`; } if (tipo && !isNaN(monto) && fecha && descripcion) { document.getElementById('tipo').value = tipo; document.getElementById('descripcion').value = descripcion; document.getElementById('monto').value = monto; document.getElementById('fecha').value = fecha; alert('Datos precargados por voz. Revisa y confirma.'); } else { alert('No se pudo extraer toda la información por voz. Por favor, ingresa los datos manualmente.'); } } function agregarFilaTabla(movimiento) { const newRow = movimientosTable.insertRow(); newRow.innerHTML = ` <td>${movimiento.tipo.charAt(0).toUpperCase() + movimiento.tipo.slice(1)}</td> <td>${movimiento.descripcion}</td> <td>${movimiento.monto.toFixed(2)} €</td> <td>${movimiento.fecha}</td> <td> <button onclick="editarMovimiento(this)">Editar</button> <button onclick="eliminarMovimiento(this)">Eliminar</button> </td> `; } function guardarMovimiento(movimiento) { let movimientos = JSON.parse(localStorage.getItem('movimientos')) || []; movimientos.push(movimiento); localStorage.setItem('movimientos', JSON.stringify(movimientos)); } window.editarMovimiento = function(button) { const row = button.parentNode.parentNode; const tipo = row.cells[0].textContent.toLowerCase(); const descripcion = row.cells[1].textContent; const monto = parseFloat(row.cells[2].textContent.replace(' €', '')); const fecha = row.cells[3].textContent; // Precargar el formulario para editar document.getElementById('tipo').value = tipo; document.getElementById('descripcion').value = descripcion; document.getElementById('monto').value = monto; document.getElementById('fecha').value = fecha; // Eliminar la fila de la tabla y del almacenamiento local eliminarMovimiento(button); }; window.eliminarMovimiento = function(button) { const row = button.parentNode.parentNode; const descripcion = row.cells[1].textContent; const monto = parseFloat(row.cells[2].textContent.replace(' €', '')); const fecha = row.cells[3].textContent; let movimientos = JSON.parse(localStorage.getItem('movimientos')) || []; movimientos = movimientos.filter(m => !(m.descripcion === descripcion && m.monto === monto && m.fecha === fecha)); localStorage.setItem('movimientos', JSON.stringify(movimientos)); row.parentNode.removeChild(row); }; }); </script> </body> </html>